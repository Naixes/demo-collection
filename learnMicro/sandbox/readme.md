| 导语 在过去，浏览器沙箱（sandbox）主要应用在前端安全领域，随着应用架构复杂，微前端方案的出现，js 运行环境沙箱在浏览器中的需求越来越多。特别是近几年比较火的微前端领域，js 沙箱是其比较核心一个技术点，是整个微前端方案的实现的关键点之一。

在主流的微前端方案中，有一个关键点决定了沙箱如何做：同一时刻是单实例还是多实例存在宿主应用中。这决定了沙箱的复杂度和技术实现。

• 单实例：同一个时刻只有一个微应用实例存在，此刻浏览器所有浏览器资源都是这个应用独占的，这种方案要解决的很大程度是应用切换的时候的变量污染清理与应用再次启动时的变量恢复。这种一般通过全局对象的代理来实现。

• 多实例：资源不是应用独占，需要解决资源共享的问题，比如路由，样式，全局变量读写，DOM。这种情况下不同沙盒需要共享着一些全局变量，甚至涉及到不同微应用间的通信诉求。实现起来一般比较复杂，容易造成变量的全局冲突。
